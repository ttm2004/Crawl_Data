{% extends "base.html" %}
{% block title %}Danh sÃ¡ch mÃ³n Äƒn{% endblock %}
{% block content %}

<h2 class="mb-4 text-success"><i class="fas fa-utensils me-2"></i>Danh sÃ¡ch mÃ³n Äƒn</h2>

<form class="row g-3 mb-3" method="get">
  <div class="col-md-5">
    <input type="text" class="form-control" name="keyword" placeholder="TÃ¬m kiáº¿m mÃ³n Äƒn..." value="{{ keyword or '' }}">
  </div>
  <div class="col-md-3">
    <select name="sort" class="form-select">
      <option value="moi" {% if sort == 'moi' %}selected{% endif %}>Má»›i nháº¥t</option>
      <option value="az" {% if sort == 'az' %}selected{% endif %}>A â†’ Z</option>
      <option value="za" {% if sort == 'za' %}selected{% endif %}>Z â†’ A</option>
    </select>
  </div>
  <div class="col-md-2 d-grid">
    <button class="btn btn-success" type="submit"><i class="fa fa-search me-1"></i> TÃ¬m</button>
  </div>
  <!-- <div class="col-md-2 d-grid">
    <a href="../crawl.py" class="btn btn-warning text-white"><i class="fa fa-plus"></i> Crawl mÃ³n má»›i</a>
  </div> -->
</form>
{% if keyword %}
  <div class="alert alert-info">
    ğŸ” TÃ¬m tháº¥y <strong>{{ mons|length }}</strong> káº¿t quáº£ cho tá»« khÃ³a <strong>"{{ keyword }}"</strong>
  </div>
{% elif sort %}
  <div class="alert alert-info">
    ğŸ“‹ Äang hiá»ƒn thá»‹ theo kiá»ƒu sáº¯p xáº¿p: <strong>
      {% if sort == 'az' %}A â†’ Z{% elif sort == 'za' %}Z â†’ A{% else %}Má»›i nháº¥t{% endif %}
    </strong>
  </div>
{% endif %}

{% if mons|length == 0 %}
  <div class="alert alert-warning text-center">KhÃ´ng tÃ¬m tháº¥y mÃ³n Äƒn phÃ¹ há»£p!</div>
{% else %}
<p class="text-muted">Tá»•ng cá»™ng: <strong>{{ total_results }}</strong> mÃ³n Äƒn</p>
  <ul class="list-group shadow-sm">
    {% for mon in mons %}
    <li class="list-group-item d-flex gap-3 align-items-start">
      <img src="{{ mon.hinh_anh }}" class="rounded" style="width: 100px; height: 80px; object-fit: cover;">
      <div class="flex-grow-1">
        <h5>{{ mon.ten_mon }}</h5>
        <a href="/chitiet/{{ mon.id }}" class="btn btn-outline-primary btn-sm">Xem chi tiáº¿t</a>
      </div>
    </li>
    {% endfor %}
  </ul>

  <nav class="mt-4">
    <ul class="pagination justify-content-center">
      {% if page > 1 %}
        <li class="page-item"><a class="page-link" href="?page={{ page - 1 }}&keyword={{ keyword }}&sort={{ sort }}">Â« TrÆ°á»›c</a></li>
      {% endif %}
      {% for p in range(1, total_pages + 1) %}
        <li class="page-item {% if p == page %}active{% endif %}">
          <a class="page-link" href="?page={{ p }}&keyword={{ keyword }}&sort={{ sort }}">{{ p }}</a>
        </li>
      {% endfor %}
      {% if page < total_pages %}
        <li class="page-item"><a class="page-link" href="?page={{ page + 1 }}&keyword={{ keyword }}&sort={{ sort }}">Sau Â»</a></li>
      {% endif %}
    </ul>
  </nav>
{% endif %}

<!-- <script>
  document.addEventListener('DOMContentLoaded', () => {
    showModal("ğŸ” TÃ¬m kiáº¿m mÃ³n Äƒn theo tá»« khÃ³a hoáº·c sáº¯p xáº¿p!");
  });
</script> -->

{% endblock %}
